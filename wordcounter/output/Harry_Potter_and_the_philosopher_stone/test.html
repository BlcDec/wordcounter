<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <script type="text/javascript" src="jquery-1.12.4.min.js"></script>
    <script src="jquery-1.12.4.min.js"></script>
    <script src="jquery-ui.js"></script>
    <link rel="stylesheet" href="jquery-ui.css">
    <style type="text/css">
        body {
            font-size: 100%;
        }

        .head {
            background-color: #339933;
            text-align: center;
        }

        .head .field {
            text-align: center;
        }

        .details {
            background-color: rgba(133, 135, 132, 0.49);
            color: #2b2b2b;
            display: none;
            font-size: 70%;
            box-shadow: 0 10px 10px rgba(0, 0, 0, 0.109) inset;
            padding: 10px 10px 10px 10px;
        }

        .row {
            background-color: whitesmoke;
            box-shadow: 0 10px 10px rgba(0, 0, 0, 0.10), 0 6px 6px rgba(0, 0, 0, 0.10);
            border-bottom: 1px solid silver;
            height: 70px;
            text-align: center;
            overflow:hidden
        }

        .field {
            display: inline-block;
            /*overflow-x: hidden;*/
            word-break: keep-all;
        }

        .no {
            width: 8%;
        }

        .word {
            width: 25%;
        }

        .symbol {
            width: 25%;
        }

        .basic {
            width: 35%;
        }

        p {
            margin: 0px;
        }

        .row .basic, .row .symbol {
            font-size: 80%;
        }
    </style>
    <script type="text/javascript">
        //        $(function () {
        //            $(".row").click(function () {
        //                var index = $(this).attr('index');
        //                $("#details_" + index).toggle("blind", {}, 500);
        //            });
        //        })
        function show_details(index) {
            $("#details_" + index).toggle("blind", {}, 500);
        }
    </script>
</head>
<body>

<div class="head">
    <div class="field no">
        No.
    </div>
    <div class="field word">
        Word
    </div>
    <div class="field symbol">
        Phonetic Symbols
    </div>
    <div class="field basic">
        Basic Descriptions
    </div>
</div>

<div id="content_list">
    <!--<div id="row_0" class="row" onclick="show_details(0)">-->
        <!--<div class="field no">-->
            <!--1-->
        <!--</div>-->
        <!--<div class="field word">-->
            <!--Hermione-->
        <!--</div>-->
        <!--<div class="field symbol">-->
            <!--<p>uk. [hə:'maiəni]</p>-->
            <!--<p>us. [hə:'maiəni]</p>-->
        <!--</div>-->
        <!--<div class="field basic">-->
            <!--<div>n. 赫尔迈厄尼（女子名）；希腊神话Menelzus 与helen 之女</div>-->
        <!--</div>-->
    <!--</div>-->
    <!--<div id="details_0" class="details">-->
        <!--单词在本书中共出现 269 次<br/>-->
        <!--网络释义：<br/>-->
        <!--Hermione: 赫敏,妙丽,赫女星<br/>-->
        <!--词组：<br/>-->
        <!--Hermione Corfield: 赫敏·科菲尔德<br/>-->
        <!--Hermione Grfrustrine: 赫敏·格兰杰-->
    <!--</div>-->
    <!--<div id="row_1" class="row" index="-1" onclick="show_details(-1)">-->
        <!--<div class="field no">-->
            <!--2-->
        <!--</div>-->
        <!--<div class="field word">-->
            <!--potter-->
        <!--</div>-->
        <!--<div class="field symbol">-->
            <!--<p>uk. ['pɒtə]</p>-->
            <!--<p>us. ['pɑtɚ]</p>-->
        <!--</div>-->
        <!--<div class="field basic">-->
            <!--<p>n. 陶艺家，制陶工人</p>-->
            <!--<p>n. (Potter)人名；(英、荷、德、葡)波特</p>-->
            <!--<p>vt. 闲混，虚度</p>-->
            <!--<p>vi. 闲逛；慢条斯理地做事</p>-->
        <!--</div>-->
    <!--</div>-->
    <!--<div id="details_1" class="details">-->
        <!--单词在本书中共出现 115 次<br/>-->
        <!--网络释义：<br/>-->
        <!--potter: 陶工,哈利波特,波特<br/>-->
        <!--词组：<br/>-->
        <!--Samantha Potter: 诗曼花·波特<br/>-->
        <!--Potter Glacier: 波特冰川-->
    <!--</div>-->

</div>
<div id="toolbar"></div>

<script type="text/javascript" src="data.js" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
    var div_content = $("#content_list");

    function appendNewLineToTable(word, index) {
        var div_row = $("<div id='row_" + index + "' class='row'  onclick='show_details(" + index + ")'></div>");
        // div: No.
        var div_no = $("<div class='field no'></div>");
        div_no.append("" + (index + 1));
        div_row.append(div_no);

        // div: the word
        var div_word = $("<div class='field word'></div>"); // the word
        if (word["rq"]) {
            div_word.append(word["rq"]);
        }
        div_row.append(div_word);
        // div: phonetic symbols
        var div_phonetic_symbol = $("<div class='field symbol'></div>");
        if (word['uksm']) {
            var p_phonetic_symbol_uk = $("<p class='phonetic_symbol'></p>");
            p_phonetic_symbol_uk.append("uk. ");
            p_phonetic_symbol_uk.append("[" + word["uksm"] + "]");
            div_phonetic_symbol.append(p_phonetic_symbol_uk);

        }
        if (word['ussm']) {
            var p_phonetic_symbol_us = $("<p class='phonetic_symbol'></p>");
            p_phonetic_symbol_us.append("us. ");
            p_phonetic_symbol_us.append("[" + word["ussm"] + "]");
            div_phonetic_symbol.append(p_phonetic_symbol_us);
        }
        div_row.append(div_phonetic_symbol);
        // div: basic desciption
        var div_basic = $("<div class='field basic'></div>"); // basic desciption
        if (word['basic']) {
            for (var i = 0; i < word.basic.length; i++) {
                div_basic.append("<p>" + word.basic[i] + "</p>");
            }
        }
        div_row.append(div_basic);

        div_content.append(div_row);

        var div_detail = $("<div id='details_" + index + "' class='details'></div>");
        // div: count
        var div_count = $("<div></div>");
        if (word['count_in_book']) {
            div_count.append("单词在本书中共出现 " + word['count_in_book'] + " 次");
//            div_count.append(word['count_in_book']);
        }
        // div: web description
        var div_web = $("<div></div>"); // web description
        div_web.append("网络释义：<br/>");
        if (word.web && word.web.length > 0) {
            var key = Object.keys(word.web[0])[0];
            div_web.append("<span class='key'> &nbsp;&nbsp;&nbsp;&nbsp;" + key + "</span>: " + word.web[0][key]);
        }
        // div: phrases
        var div_phrases = $("<div></div>"); // phrases
        div_phrases.append("词组：<br/>");
        if (word.web && word.web.length > 1) {
            for (var i = 1; i < word.web.length; i++) {
                var key = Object.keys(word.web[i])[0];
                div_phrases.append("<span class='key'> &nbsp;&nbsp;&nbsp;&nbsp;" + key + "</span>: " + word.web[i][key] + "<br/>");
            }
        }
//        tr.append(td_phrases);
        div_detail.append(div_count);
        div_detail.append(div_web);
        div_detail.append(div_phrases);
        div_content.append(div_detail)
    }

    var startIndex = 0;

    function showMore(n) {
        console.log(n);
        if (!n) {
            n = words.length;
        }
        if (n > words.length - startIndex) {
            n = words.length - startIndex;
        }
        console.log(n);
        for (var i = 0; i < n; i++) {
            var word = words[i + startIndex];
            appendNewLineToTable(word, i + startIndex);
        }
        startIndex += n;
        if (startIndex >= words.length) {
            $("#toolbar").hidden;
        }
    }

    //    console.log(words.length);
    var n = words.length > 10 ? 10 : words.length;
    console.log("words.length: " + words.length);
    showMore(n);

    $("#toolbar").append("<a href=\"javascript:void(0)\" onclick=\"showMore(100)\">Next " + n + " Words</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;");
    $("#toolbar").append("<a href=\"javascript:void(0)\" onclick=\"showMore()\">Show All Words</a>");
</script>

<script>
    $(function () {
//        $( ".hidden_row:visible" ).removeAttr( "style" ).fadeOut();
        $(".normal_row").click(function () {
            var id = $(this).attr("id");
            var options = {percent: 50};
            console.info(id);
            console.info($("#" + id + "_hidden"));
            $("#" + id + "_hidden").toggle("blind");
        })
    })
</script>

</body>
</html>